apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: rlabdev-service-api
  description: The Service API Description
  annotations:
    tags: "backend, service"
    backstage.io/techdocs-ref: https://rlabdev.com/docs/rlabdev-service-api
spec:
  type: service
  lifecycle: experimental
  owner: rca0
  docs:
    overview: docs/index.md
  providesApis:
    - "rlabdev-service-api"
  visibility: public
  relations:
    - type: uses-service
      target: rlabdev-worker
    - type: uses-resource
      target: rds-postgresql
    - type: uses-resource
      target: aws-sqs-queue
    - type: uses-resource
      target: kafka
    - type: uses-resource
      target: redis-cache
    - type: belongs-to
      target: group:default/rca0
    - type: uses-api
      target: rlabdev-service-api

---
apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: rds-postgresql
  description: RDS PostgreSQL Database
  annotations:
    type: database
    provider: aws
spec:
  type: aws:rds:postgresql
  lifecycle: development
  owner: infrastructure-team
  relations:
    - type: uses-api
      target: rlabdev-service-api

---
apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: aws-sqs-queue
  description: AWS SQS Queue
  annotations:
    type: messaging
    provider: aws
    topicOrQueueName: sqs-queue-name-1
spec:
  type: aws:sqs
  lifecycle: development
  owner: infrastructure-team
  relations:
    - type: uses-api
      target: rlabdev-service-api

---
apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: kafka
  description: Kafka
  annotations:
    type: messaging
    topicOrQueueName: kafka-topic-name-1
spec:
  type: messaging:kafka
  lifecycle: development
  owner: infrastructure-team
  relations:
    - type: uses-api
      target: rlabdev-service-api

---
apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: redis-cache
  description: Redis Cache
  annotations:
    type: cache
spec:
  type: caching:redis
  lifecycle: development
  owner: infrastructure-team
  relations:
    - type: uses-api
      target: rlabdev-service-api
